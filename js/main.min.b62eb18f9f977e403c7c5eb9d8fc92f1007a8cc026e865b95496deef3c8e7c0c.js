"use strict";document.addEventListener("DOMContentLoaded",function(){console.log("【调试】脚本已加载，开始执行...");const t=document.getElementById("copy-rss-button"),e=document.getElementById("copy-toast");console.log("【调试】查找元素完成。按钮:",t,"提示框:",e),t?(console.log("【调试】按钮存在，准备添加点击事件监听器..."),t.addEventListener("click",function(e){console.log("【调试】RSS 按钮被点击了！"),e.preventDefault();const t=this.dataset.rssUrl;if(console.log("【调试】获取到的 RSS URL:",t),!t){console.error("【调试】错误：未在 data-rss-url 属性中找到链接。");return}navigator.clipboard&&window.isSecureContext?(console.log("【调试】尝试使用现代 Clipboard API 复制..."),navigator.clipboard.writeText(t).then(function(){console.log("【调试】Clipboard API 复制成功！"),n()}).catch(function(e){console.error("【调试】Clipboard API 失败，尝试备用方法。",e),s(t)})):(console.log("【调试】浏览器不支持或非安全环境，使用备用方法。"),s(t))}),console.log("【调试】点击事件监听器已添加。")):console.error('【调试】错误：未能在页面上找到 id="copy-rss-button" 的按钮。');function n(){console.log("【调试】执行 showToast 函数，准备显示提示框。"),e?(e.classList.add("show"),setTimeout(function(){e.classList.remove("show")},2e3)):console.error("【调试】错误：无法找到 toast 元素来显示。")}function s(e){console.log("【调试】执行备用复制方法 fallbackCopy...");const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select();try{const e=document.execCommand("copy");e?(console.log("【调试】备用方法复制成功！"),n()):console.error("【调试】备用方法复制失败。")}catch(e){console.error("【调试】备用方法执行时捕获到错误。",e)}document.body.removeChild(t)}}),window.addEventListener("load",()=>{const e=document.getElementById("totop");if(!e)return;window.onscroll=()=>{document.body.scrollTop>300||document.documentElement.scrollTop>300?(e.style.visibility="visible",e.style.opacity="1"):(e.style.visibility="hidden",e.style.opacity="0")}})